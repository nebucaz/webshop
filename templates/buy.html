{% extends "base.html" %}

{% block title %}Buy Product - Flask Webshop{% endblock %}

{% block content %}
<div>
    <h2 style="color: #667eea; margin-bottom: 20px;">Buy a Product</h2>
    
    <p style="margin-bottom: 20px;">Enter a product ID to purchase. The endpoint will try to parse it as an integer.</p>
    
    <form method="POST" action="{{ url_for('buy') }}" style="background: #f8f9fa; padding: 30px; border-radius: 8px;">
        <div style="margin-bottom: 20px;">
            <label for="product_id" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">
                Product ID (must be an integer):
            </label>
            <input 
                type="text" 
                id="product_id" 
                name="product_id" 
                placeholder="Enter product ID (e.g., 123)"
                style="width: 100%; padding: 12px; border: 2px solid #dee2e6; border-radius: 6px; font-size: 1rem; transition: border-color 0.3s;"
                onfocus="this.style.borderColor='#667eea'"
                onblur="this.style.borderColor='#dee2e6'"
            >
        </div>
        
        <button type="submit" class="btn">
            Buy Product
        </button>
        
        <a href="{{ url_for('index') }}" class="btn" style="background: #6c757d;">
            Cancel
        </a>
    </form>
    
    <div style="margin-top: 30px; padding: 20px; background: #d1ecf1; border-radius: 8px; border-left: 4px solid #17a2b8;">
        <h3 style="margin-bottom: 10px; color: #0c5460;">ℹ️ Test Cases</h3>
        <ul style="color: #0c5460; margin-left: 20px;">
            <li><strong>Valid integer:</strong> Enter "123" → Will work successfully</li>
            <li><strong>Invalid string:</strong> Enter "abc" → Will trigger Werkzeug debugger!</li>
            <li><strong>Invalid float:</strong> Enter "12.5" → Will trigger Werkzeug debugger!</li>
            <li><strong>Empty:</strong> Submit empty → Will trigger Werkzeug debugger!</li>
        </ul>
    </div>
    
    <div style="margin-top: 20px; padding: 20px; background: #f8d7da; border-radius: 8px; border-left: 4px solid #dc3545;">
        <h3 style="margin-bottom: 10px; color: #721c24;">⚠️ Debug Mode Active</h3>
        <p style="color: #721c24;">When you submit an invalid product_id, the app will crash with a <code>ValueError</code> and the Werkzeug debugger will be activated. You'll be able to:</p>
        <ul style="color: #721c24; margin-left: 20px; margin-top: 10px;">
            <li>See the full stack trace</li>
            <li>Inspect variables at each frame</li>
            <li>Execute Python code in the context of the error</li>
        </ul>
        <p style="color: #721c24; margin-top: 10px; font-weight: 600;">⚠️ Never enable debug mode in production!</p>
    </div>
</div>
{% endblock %}

